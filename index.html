<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Players Information</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio,line-clamp"></script>
  </head>

  <body>
    <div class="container flex flex-col justify-center items-center">
      <h1 class="text-3xl my-4 font-bold">Players Information</h1>

      <div class="prose flex flex-col">
        <!-- <form id="playerForm">
          <input type="text" name="name" placeholder="Name" id="name" />
          <input type="text" name="dob" placeholder="Date of Birth" id="dob" />

          <input
            type="text"
            name="photoUrl"
            placeholder="Photo Url"
            id="photoUrl"
          />

          <input
            type="text"
            name="birthplace"
            placeholder="Birth Place"
            id="birthplace"
          />

          <input type="text" name="career" placeholder="Career" id="career" />

          <input
            type="number"
            name="noOfMatches"
            placeholder="No Of Matches"
            id="noOfMatches"
          />

          <input type="number" name="score" placeholder="Score" id="score" />

          <input
            type="number"
            name="fifties"
            placeholder="Fifties"
            id="fifties"
          />

          <input
            type="number"
            name="hundreds"
            placeholder="Hundreds"
            id="hundreds"
          />

          <input type="number" name="weaket" placeholder="Weaket" id="weaket" />

          <input type="number" name="avrage" placeholder="Avrage" id="avrage" />

          <button
            type="submit"
            class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800"
          >
            Submit
          </button>
        </form> -->
        <div id="playerDetails"></div>
      </div>

      <form id="searchForm" class="flex w-1/4 rounded-full bg-gray-100">
        <input
          id="search"
          class="w-full border-none bg-transparent px-4 py-1 text-gray-400 outline-none focus:outline-none"
          type="search"
          name="search"
          placeholder="Search..."
        />
        <button
          type="submit"
          class="m-2 rounded-full bg-blue-600 px-4 py-2 text-white"
        >
          <svg
            class="fill-current h-6 w-6"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            version="1.1"
            id="Capa_1"
            x="0px"
            y="0px"
            viewBox="0 0 56.966 56.966"
            style="enable-background: new 0 0 56.966 56.966"
            xml:space="preserve"
            width="512px"
            height="512px"
          >
            <path
              d="M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23  s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92  c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17  s-17-7.626-17-17S14.61,6,23.984,6z"
            />
          </svg>
        </button>
      </form>

      <!-- Tailwind Form Start -->

      <div
        class="w-full max-w-md sm:w-2/3 lg:w-1/3 sm:my-5 my-8 relative z-10 bg-white rounded-lg shadow-lg p-6"
      >
        <form id="playerForm" class="max-w-lg mx-auto grid grid-cols-2 gap-4">
          <div class="mb-5">
            <label
              for="name"
              class="block mb-2 text-sm font-medium text-gray-900"
              >Player Name</label
            >
            <input
              type="text"
              id="name"
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
              placeholder="Virat Kohli"
              required
            />
          </div>
          <div class="mb-5">
            <label
              for="dob"
              class="block mb-2 text-sm font-medium text-gray-900"
              >Player Date of Birth</label
            >
            <input
              type="text"
              id="dob"
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
              placeholder="01/01/2022"
              required
            />
          </div>
          <div class="mb-5">
            <label
              for="photoUrl"
              class="block mb-2 text-sm font-medium text-gray-900"
              >Player Photo Link</label
            >
            <input
              type="text"
              id="photoUrl"
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
              placeholder="Photo URL"
              required
            />
          </div>
          <div class="mb-5">
            <label
              for="birthplace"
              class="block mb-2 text-sm font-medium text-gray-900"
              >Player Birth Player</label
            >
            <input
              type="text"
              id="birthplace"
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
              placeholder="Delhi"
              required
            />
          </div>
          <div class="mb-5">
            <label
              for="career"
              class="block mb-2 text-sm font-medium text-gray-900"
              >Player Career</label
            >
            <input
              type="text"
              id="career"
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
              placeholder="IPL"
              required
            />
          </div>

          <div class="mb-5">
            <label
              for="noOfMatches"
              class="block mb-2 text-sm font-medium text-gray-900"
              >No of Matches</label
            >
            <input
              type="number"
              id="noOfMatches"
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
              placeholder="100"
              required
            />
          </div>

          <div class="mb-5">
            <label
              for="score"
              class="block mb-2 text-sm font-medium text-gray-900"
              >Score</label
            >
            <input
              type="number"
              id="score"
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
              placeholder="100"
              required
            />
          </div>

          <div class="mb-5">
            <label
              for="fifties"
              class="block mb-2 text-sm font-medium text-gray-900"
              >Fifties</label
            >
            <input
              type="number"
              id="fifties"
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
              placeholder="10"
              required
            />
          </div>

          <div class="mb-5">
            <label
              for="hundreds"
              class="block mb-2 text-sm font-medium text-gray-900"
              >Hundreds</label
            >
            <input
              type="number"
              id="hundreds"
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
              placeholder="1"
              required
            />
          </div>

          <div class="mb-5">
            <label
              for="weaket"
              class="block mb-2 text-sm font-medium text-gray-900"
              >Weakets</label
            >
            <input
              type="number"
              id="weaket"
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
              placeholder="10"
              required
            />
          </div>

          <div class="mb-5">
            <label
              for="avrage"
              class="block mb-2 text-sm font-medium text-gray-900"
              >Avrage</label
            >
            <input
              type="number"
              id="avrage"
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
              placeholder="10"
              required
            />
          </div>
          <button
            type="submit"
            class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center col-span-2"
          >
            Submit
          </button>
        </form>
      </div>

      <!-- Tailwind Form End -->

      <div id="playerDetails"></div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.7/axios.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const form = document.getElementById("playerForm");
        form.addEventListener("submit", (event) => {
          event.preventDefault();
          const name = document.getElementById("name").value;
          const dob = document.getElementById("dob").value;
          const photoUrl = document.getElementById("photoUrl").value;
          const birthplace = document.getElementById("birthplace").value;
          const career = document.getElementById("career").value;
          const noOfMatches = document.getElementById("noOfMatches").value;
          const score = document.getElementById("score").value;
          const fifties = document.getElementById("fifties").value;
          const hundreds = document.getElementById("hundreds").value;
          const weaket = document.getElementById("weaket").value;
          const avrage = document.getElementById("avrage").value;
          const formData = {
            name,
            dob,
            photoUrl,
            birthplace,
            career,
            noOfMatches,
            score,
            fifties,
            hundreds,
            weaket,
            avrage,
          };

          axios
            .post("http://localhost:3000/player", formData)
            .then((response) => {
              console.log(response.data);
            })
            .catch((error) => {
              console.error(error);
            });
        });
      });

      const search = document.getElementById("search");
      const formSearch = document.getElementById("searchForm");
      formSearch.addEventListener("submit", (event) => {
        event.preventDefault();
        let player;
        axios
          .get("http://localhost:3000/player/" + search.value)
          .then((response) => {
            player = response.data.data[0];
            const playerDetails = document.getElementById("playerDetails");
            playerDetails.innerHTML = `
            <button id="editBtn" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center col-span-2" >Edit Details</button>
            <h2>${player.name}</h2>
            <p>Date of Birth: ${player.dob}</p>
            <img src="${player.photoUrl}" alt="${player.name}">
            <p>Birth Place: ${player.birthplace}</p>
            <p>Career: ${player.career}</p>
            <p>No Of Matches: ${player.noOfMatches}</p>
            <p>Score: ${player.score}</p>
            <p>Fifties: ${player.fifties}</p>
            <p>Hundreds: ${player.hundreds}</p>
            <p>Weaket: ${player.weaket}</p>
            <p>Avrage: ${player.avrage}</p>
            `;

            const editBtn = document.getElementById("editBtn");
            editBtn.addEventListener("click", () => {
              console.log("Clicked");
              axios
                .post("http://localhost:3000/deletePlayer/" + search.value)
                .then((result) => {
                  console.log(result.data);
                  const name = (document.getElementById("name").value =
                    player.name);
                  const dob = (document.getElementById("dob").value =
                    player.dob);
                  const photoUrl = (document.getElementById("photoUrl").value =
                    player.photoUrl);
                  const birthplace = (document.getElementById(
                    "birthplace"
                  ).value = player.birthplace);
                  const career = (document.getElementById("career").value =
                    player.career);
                  const noOfMatches = (document.getElementById(
                    "noOfMatches"
                  ).value = player.noOfMatches);
                  const score = (document.getElementById("score").value =
                    player.score);
                  const fifties = (document.getElementById("fifties").value =
                    player.fifties);
                  const hundreds = (document.getElementById("hundreds").value =
                    player.hundreds);
                  const weaket = (document.getElementById("weaket").value =
                    player.weaket);
                  const avrage = (document.getElementById("avrage").value =
                    player.avrage);
                })
                .catch((err) => console.log(err));
            });
          })
          .catch((error) => {
            console.error(error);
          });
      });
    </script>
  </body>
</html>
